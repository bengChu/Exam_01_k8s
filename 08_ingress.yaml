apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: exam-01-ingress
  annotations:
    kubernetes.io/ingress.class: "nginx"
    # üîë ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç: Annotation ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Server API Rewrite
    # ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö Nginx ‡πÉ‡∏´‡πâ‡∏™‡πà‡∏á Traffic ‡∏ó‡∏µ‡πà /exam01/api/.. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà /.. ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô Pod
    nginx.ingress.kubernetes.io/rewrite-target: /$1
spec:
  ingressClassName: "nginx"
  rules:
  - http:
      paths:
      # 1. Server API Path: ‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà /exam01/api/ ‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠ ($1) ‡πÑ‡∏õ‡∏ó‡∏µ‡πà /auth/login
      # Path ‡∏ó‡∏µ‡πà Server App ‡∏Ñ‡∏≤‡∏î‡∏´‡∏ß‡∏±‡∏á‡∏Ñ‡∏∑‡∏≠ /auth/login
      - path: /exam01/api/(.*) # üëà ‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡∏≤‡∏°‡∏´‡∏•‡∏±‡∏á /exam01/api/ ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏° $1
        pathType: Prefix
        backend:
          service:
            name: server-service
            port:
              number: 3001
      # 2. Client Frontend & Static Files: ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ rewrite-target
      - path: /exam01/static
        pathType: Prefix
        backend:
          service:
            name: client-service
            port:
              number: 80
      - path: /exam01
        pathType: Prefix
        backend:
          service:
            name: client-service
            port:
              number: 80